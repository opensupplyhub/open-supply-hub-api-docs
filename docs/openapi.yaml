openapi: 3.1.0
info:
  title: OS Hub API Design
  summary: This is Target API Design for OS Hub, at this point in time it is a proposal and not a final design.
  description: This specification outlines proposed API design for OS Hub to facilitate discussions and gather feedback before development begins.
  version: 1.0.0
servers:
  - url: http://localhost:8095
    description: Local development server
tags:
  - name: countries
    description: Operations related to countries
  - name: facilities
    description: Operations related to facilities
paths:
  /v1/countries:
    get:
      summary: Get list of countries supported by the OS Hub platform.
      description: >
        Returns an array of countries with name and id, where id is the ISO 3166-1 alpha-2 code of the country.
      tags:
        - countries
      parameters:
        - $ref: "#/components/parameters/limit"
        - name: start_after
          in: query
          description: The next identifier for pagination.
          required: false
          schema:
            type: string
            minLength: 2
            maxLength: 2
        - name: name
          in: query
          description: The name of the country.
          required: false
          schema:
            type: string
            minLength: 1
            maxLength: 255
        - name: code
          in: query
          description: The ISO 3166-1 alpha-2 code of the country.
          required: false
          schema:
            type: string
            minLength: 3
            maxLength: 3
        - name: numeric_code
          in: query
          description: The ISO 3166-1 numeric code of the country.
          required: false
          schema:
            type: string
            minLength: 3
            maxLength: 3
        - name: fields
          in: query
          description: The fields to include in the response.
          style: explode
          required: false
          schema:
            type: array
            items:
              type: string
              enum: [id, name, code, numeric_code]
      responses:
        200:
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/country"
                example:
                  - id: "GB"
                    name: "United Kingdom of Great Britain and Northern Ireland"
                    code: "GBR"
                    numeric_code: "826"
                  - id: "US"
                    name: "United States of America"
                    code: "USA"
                    numeric_code: "840"
        500:
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/error"
              example:
                message: "An unexpected error occurred while processing the request."
        400:
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/error"
              example:
                message: "The request query is invalid."
                errors:
                  - field: "start_after"
                    message: "The value must be a valid id."
  /v1/facilities:
    get:
      summary: Get list of facilities exposed by the OS Hub platform.
      description: >
        Returns an array of facilities with name and id and other properties, where id is the unique identifier of the facility.
      tags:
        - facilities
      responses:
        200:
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/facility"

components:
  schemas:
    country:
      $ref: "schemas/country.json"

    facility:
      $ref: "schemas/facility.json"

    error:
      $ref: "schemas/error.json"

  parameters:
    limit:
      name: limit
      in: query
      description: The maximum number of entries to return.
      required: false
      schema:
        default: 10
        type: integer
        minimum: 1
        maximum: 101
